From 7fffa9bc0080a3ffc83307581a02bebdb113b093 Mon Sep 17 00:00:00 2001
From: Luca Deri <deri@ntop.org>
Date: Sun, 4 Jun 2017 10:15:09 +0200
Subject: [PATCH] Added string trim Modified to info the host pools message

---
 scripts/lua/check_update.lua | 4 ++--
 scripts/lua/inc/footer.lua   | 2 ++
 src/HostPools.cpp            | 2 +-
 3 files changed, 5 insertions(+), 3 deletions(-)

diff --git a/scripts/lua/check_update.lua b/scripts/lua/check_update.lua
index 5617bbbe..24f40c69 100644
--- a/scripts/lua/check_update.lua
+++ b/scripts/lua/check_update.lua
@@ -15,8 +15,8 @@ local latest_version = ntop.getCache("ntopng.cache.version")
 if isEmptyString(latest_version) then
   local rsp = ntop.httpGet("http://www.ntop.org/ntopng.version", "", "", 10 --[[ seconds ]])
 
-  if (not isEmptyString(rsp)) and (not isEmptyString(rsp["CONTENT"])) then
-    latest_version = rsp["CONTENT"]
+  if(not isEmptyString(rsp)) and (not isEmptyString(rsp["CONTENT"])) then
+     latest_version = trimSpace(string.gsub(rsp["CONTENT"], "\n", ""))
   else
     -- a value that won't trigger an update message
     latest_version = "0.0.0"
diff --git a/scripts/lua/inc/footer.lua b/scripts/lua/inc/footer.lua
index acb9582a..e636fb45 100644
--- a/scripts/lua/inc/footer.lua
+++ b/scripts/lua/inc/footer.lua
@@ -417,6 +417,8 @@ end
 -- Update check
 local latest_version = ntop.getCache("ntopng.cache.version")
 
+latest_version = trimSpace(string.gsub(latest_version, "\n", ""))
+
 if isEmptyString(latest_version) then
   print[[
   $.ajax({
diff --git a/src/HostPools.cpp b/src/HostPools.cpp
index 71accb28..b45298fe 100644
--- a/src/HostPools.cpp
+++ b/src/HostPools.cpp
@@ -62,7 +62,7 @@ HostPools::HostPools(NetworkInterface *_iface) {
 
   assert(max_num_pools == MAX_NUM_HOST_POOLS);
 
-  ntop->getTrace()->traceEvent(TRACE_NORMAL, "Host Pools Available: %u", MAX_NUM_HOST_POOLS);
+  ntop->getTrace()->traceEvent(TRACE_INFO, "Host Pools Available: %u", MAX_NUM_HOST_POOLS);
 }
 
 /* *************************************** */
